triage_task:
  description: >
      Analyze the following customer message:

        "{customer_message}"

        Classify the issue into one of the following categories:
        - Order Issue
        - Refund Issue
        - General Question
        - Escalation Needed

        Also extract:
        - Order ID (if present)
        - Customer sentiment (Neutral / Frustrated / Angry)
  expected_output: >
     A structured classification including:
        - issue_type
        - order_id (if any)
        - sentiment
  agent: triage_agent

order_task:
  description: >
    If the issue is classified as 'Order Issue':

        - Extract the order ID
        - Use the Order Lookup Tool
        - Provide a clear, friendly response explaining order status
        - If delayed more than 3 days, apologize and offer reassurance
  expected_output: >
    A customer-friendly response explaining:
        - Order status
        - Tracking details
        - Resolution or next steps
  agent: order_agent

refund_task:
  description: >
    If the issue is classified as 'Refund Issue':
        - Extract order ID
        - Check refund eligibility
        - Use Refund Tool if eligible
        - Explain refund decision clearly
  expected_output: >
    A clear decision including:
        - Whether refund was approved or denied
        - Explanation based on policy
        - Next steps for customer
  agent: refund_agent

escalation_task:
  description: >
        If customer sentiment is Angry or issue is complex:
        - Prepare escalation summary for human agent
        - Include issue type
        - Include order ID
        - Include sentiment analysis
        - Suggest recommended resolution
  expected_output: >
    A structured escalation summary for human support including:
        - Issue Type
        - Order ID
        - Sentiment
        - Summary
        - Recommended Action
  agent: escalation_agent

policy_task:
  description: >
    Review the drafted customer support response and verify compliance 
    with the company’s ecommerce policies.

    Inputs:
    - Customer query
    - Drafted support response
    - Company policy document

    Your responsibilities:
    1. Check if refund/return/exchange decision follows policy rules.
    2. Verify timelines (return window, refund processing days, etc.).
    3. Confirm eligibility conditions are satisfied.
    4. Detect policy violations or risky promises.
    5. If compliant → Approve.
    6. If non-compliant → Reject and provide corrected response.
  expected_output: >
    A structured compliance report:

    - Policy Decision: (Approved / Rejected)
    - Violations Found: (List if any)
    - Risk Level: (Low / Medium / High)
    - Corrected Response (if needed)
    - Explanation referencing policy clauses
  agent: policy_agent

general_task:
  description: >
    Review the drafted response to a customer's general enquiry.

    Inputs:
    - Customer message
    - Drafted support reply
    - Company policy document
    - Shipping SLA document (if relevant)
    - Product catalog data (if relevant)

    Your responsibilities:

    1. Validate factual accuracy (pricing, availability, shipping times).
    2. Ensure tone is professional and customer-friendly.
    3. Confirm no policy violations exist.
    4. Check that no guarantees beyond official policy are made.
    5. Ensure no sensitive internal data is exposed.
    6. If missing information is required → Recommend clarification.
    7. Approve or reject the response.

    If rejected, provide a corrected, compliant version.
  expected_output: >
    Structured Compliance Report:

    - Decision: Approved / Rejected
    - Accuracy Check: Pass / Fail
    - Policy Compliance: Pass / Fail
    - Risk Level: Low / Medium / High
    - Issues Found: (bullet list)
    - Corrected Response (if applicable)
    - Explanation
  agent: general_agent